# 概述
Webpack以修改对象（包括模块和全局对象）的引用路径（修改import语句和全局变量的调用），
将共享的对象（全局变量需定义在一个模块中）打包

引入的对象可以是模块，也可以是变量，本例子主要以文件形式的模块作为对象，
全局变量的引入仅在ProvidePlugin和module.rules中附带介绍一下。

# 术语

### 文件
文件指的是JS文件，JS文件根据来源分为两类：
- 本地文件（非lib文件）
- 第三方文件（在程序中使用的其他库）

### 文件树，文件森林
JS文件之间的依赖关系，形成了一个树形结构，这就是文件树。

树形结构的根节点（根节点也是一个JS文件）一般有两类：
- 以异步方式"import('XXX.js')"导入的JS文件。
- Webpack配置文件中，entry指定的JS文件。

每当JS文件中使用import语句"import 'XXX.js'"的时候，就形成了一个节点。

由于一个系统中，文件树不止一个，于是形成了文件森林。

### Module
一个Module可以是单个的JS文件，也可以是相互依赖的多个文件。
即使是多个文件，也有一个根文件，供外部方位。
所以，这里我们认为Module和JS文件是等效的，不再加以区分。

### 同步块，异步块
同步块是指以同步方式加载的JS文件。这些模块在ES6的代码中，通常是以import语句引入的。<br>
如： import 'XXX.js'<br>
异步块的概念与同步块相对。主要是为了实现按需引入代码。通常是以import函数引入的。<br>
如： import('XXX.js')

### Entry Point（入口）
因为相互依赖JS文件之间是树形结构的。因此必然存在一个根节点，这个根节点就是Entry Point。

### Chunk
位于同一个树形结构中的文件，被集合在一起，就称为Chunk。

有时候，打包在一起的文件也称Chunk。但是这个Chunk中的文件并不是树形结构的，而是一个松散的集合。

Webpack中Chunk的根有两种，入口指定，异步引入。
- 入口指定，是指在Webpack配置文件中，entry属性指定的JS文件。
- 异步引入，是import函数（注意，不是import语句）引入的JS文件。

### Loader
Webpack默认只能处理JS文件，但是前段还有CSS，Image，字体等类型的文件需要处理。
Webpack使用各种各样的Loader对这些非JS类型的文件进行处理。

### Plugins
插件用于以各种方式自定义webpack构建过程。

# 原理
根据文件树来源，以及树中文件的来源，找到符合要求的文件，再将这些文件打包在一起。

文件树按照根节点的来源，分为2类：
- entry指定
- 异步入口

webpack需要我们先指定文件树，再指定文件，最后再从这些文件中，找出符合要求的文件，打包在一起。

对不同来源的文件，有不同的要求。

对本地文件的默认要求是：
- 出现在了2个以上的文件树中
- 根节点中没有被引用（如果根节点中有引用，就使用根节点中的引用，不再单独打包）

对第三方文件的默认要求是：
- 根节点中没有被引用

一旦找到符合要求的文件，就将这些文件单独打包。
为防止打包的文件树过多，可以使用maxAsyncRequests和maxInitialRequests来限制。

当打包好的项目，是作为一个Lib被其他项目使用时。
为了解决第三方依赖冲突的问题，webpack使用externals属性来解决冲突。
即在Lib项目中，不对指定一些第三方依赖，进行不打包。

# 非JS文件的处理

Webpack默认是只对JS文件进行处理的，但是实际应用时，我们需要对CSS等文件也进行处理。
因此，我们需要对这些非JS文件指定Rule。即在"module.rules"中，指定对应的处理。


